<html>
	<LINK href="stylesheets/stylesheet.css" rel="stylesheet" type="text/css">
	<script src="multipliers/master.js"></script>
	<script src="items/master.js"></script>
	<script src="items/edible/plants/growable/master.js"></script>
	<script src="items/edible/plants/nongrowable/master.js"></script>
	<script src="items/edible/fruits/master.js"></script>
	<script src="items/edible/mushrooms/master.js"></script>
	<script src="items/edible/readymade/master.js"></script>
	<script src="items/nonedible/collectible/liquids/master.js"></script>
<div id="itemSelectionDiv">
</div>

<div id="currentItemDiv">
</div>

<div id="dependantDiv">
</div>

<div id="profitTableDiv">
<p id="profitTable"></p>
</div>

<div id="multiplierTableDiv">
<button id="multiplierTable" onclick="showMultiplierTable()">Show Multiplier Table</button>
</div>

<script>

///////////////////////////////////////////////////////////////////////

registerItem({
	"name":"Corn",
    "category":"Vegetable",
    "sell":1000,
    "buy":3000,
    "pricemultiplier":"E",
    "effects":{
    	"hp":75
        },
	"upgradeinfo":{
    	"rarity":1,
        "difficulty":1,
    	"vit":6
        },
	"ingredienteffects":{
    	"rp":20
		}
	})

registerItem({
	"name":"Emery Flower",
    "category":"Plant",
    "sell":55000,
    "buy":5e5,
    "pricemultiplier":"E",
    "effects":{
    	"rp":300
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":66,
        "int":30
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	})

registerItem({
	"name":"Fireflower",
    "category":"Plant",
    "sell":2800,
    "buy":10000,
    "pricemultiplier":"E",
    "effects":{
    	"rp":70
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":41,
    	"str":2,
        "int":6
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	})

registerItem({
	"name":"Golden Cabbage",
    "category":"Vegetable",
    "sell":11500,
    "buy":5e4,
    "pricemultiplier":"E",
    "effects":{
    	"hp":500
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":59,
    	"int":20,
        "faintatkP":1
        },
	"ingredienteffects":{
    	"hp":2//unknown
        }
	})

registerItem({
	"name":"Golden Potato",
    "category":"Vegetable",
    "sell":6e3,
    "buy":3e4,
    "pricemultiplier":"E",
    "effects":{
    	"hp":350
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":55,
    	"vit":30,
        "faintatkP":1
        },
	"ingredienteffects":{
    	"hp":2//unknown
        }
	})

registerItem({
	"name":"Golden Pumpkin",
    "category":"Vegetable",
    "sell":4000,
    "buy":2e4,
    "pricemultiplier":"E",
    "effects":{
    	"hp":400
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":56,
    	"str":25,
        "faintatkP":1
        },
	"ingredienteffects":{
    	"hp":2//unknown
        }
	})
    
registerItem({
	"name":"Golden Turnip",
    "category":"Vegetable",
    "sell":2e4,
    "buy":1e5,
    "pricemultiplier":"E",
    "effects":{
    	"hp":800
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":67,
    	"str":30,
        "faintatkP":1
        },
	"ingredienteffects":{
    	"hp":2//unknown
        }
	})

registerItem({
	"name":"Great Emery Flower",
    "category":"Plant",
    "sell":25*1e4,
    "pricemultiplier":"E",
    "effects":{
    	"rp":500
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":95,
        "int":80
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	})

registerItem({
	"name":"Hot-Hot Fruit",
    "category":"Vegetable",
    "sell":900,
    "buy":7000,
    "pricemultiplier":"E",
    "effects":{
    	// None
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":35,
    	"mdef":7,
        "fireresP":5
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	})
    
registerItem({
	"name":"Noel Grass",
    "category":"Plant",
    "sell":2000,
    "buy":6660,
    "pricemultiplier":"E",
    "effects":{
    	"rp":75
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":41,
        "int":7
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	})

registerItem({
	"name":"Pickled Turnip",
    "cookinglevel":4,
    "category":"No Tool",
    "sell":48,
    "buy":400,
    "pricemultiplier":"C1",
    "effects":{
    	"hp":250,
        "rp":100,
        "str":5,
        "vit":3,
        "int":5
        },
	"materials":["Turnip"]
	})
    
registerItem({
	"name":"Pickled Turnip",
    "cookinglevel":12,
    "category":"No Tool",
    "sell":48,
    "buy":400,
    "pricemultiplier":"C1",
    "effects":{
    	"hp":250,
        "rp":100,
        "str":5,
        "vit":3,
        "int":5
        },
	"materials":["Pink Turnip"]
	})

registerItem({
	"name":"Pink Cat",
    "category":"Plant",
    "sell":110,
    "buy":450,
    "pricemultiplier":"E",
    "effects":{
    	"rp":25
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":15,
        "int":2
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	})

registerItem({
	"name":"Pink Turnip",
    "category":"Vegetable",
    "sell":200,
    "buy":700,
    "pricemultiplier":"E",
    "effects":{
    	"hp":70,
        },
	"upgradeinfo":{
    	"rarity":1,
        "difficulty":21,
    	"str":4
        },
	"ingredienteffects":{
    	"hp":2//unknown
        }
	})
    
registerItem({
	"name":"Prelude to Love",
    "cookinglevel":61,
    "category":"Mixer",
    "sell":2600,
    "buy":11200,
    "pricemultiplier":"C1",
    "effects":{
    	"hp":5000,
        "hpP":68,
        "rp":1000,
        "hpmaxP":-50,
        "rpmaxP":-50,
        "vitP":-50,
        "fireresP":50,
        "waterresP":50,
        "earthresP":50,
        "windresP":50,
        "lightresP":50,
        "darkresP":50,
        "loveresP":100
        },
	"materials":["Pink Melon","Strawberry"]
})

registerItem({
	"name":"Turnip",
    "category":"Vegetable",
    "sell":30,
    "buy":200,
    "pricemultiplier":"E",
    "effects":{
    	"hp":30,
        "rp":5
        },
	"upgradeinfo":{
    	"rarity":1,
        "difficulty":1,
    	"str":1
        },
	"ingredienteffects":{
    	"hp":2
        }
	})

registerItem({
	"name":"Turnip Heaven",
    "cookinglevel":96,
    "category":"No Tool",
    "sell":150000,
    "buy":542000,
    "pricemultiplier":"C1",
    "effects":{
    	"hp":5000,
        "hpP":90,
        "rp":1000,
        "rpP":90,
        "str":90,
        "strP":12,
        "vit":80,
        "vitP":15,
        "int":50,
        "intp":10,
        "fireresP":20,
        "lightresP":20,
        "darkresP":20
        },
	"materials":["Turnip","Pink Turnip","Golden Turnip"]
})

registerItem({
	"name":"Blue Grass",
    "category":"Plant",
    "sell":5,
    "buy":120,
    "pricemultiplier":"E",
    "effects":{
    	"hp":30,
    	"rp":3
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":11
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	})

registerItem({
	"name":"Black Grass",
    "category":"Plant",
    "sell":5,
    "buy":120,
    "pricemultiplier":"E",
    "effects":{
    	"hp":50,
    	"rp":3
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":23
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	})

registerItem({
	"name":"White Grass",
    "category":"Plant",
    "sell":5,
    "buy":120,
    "pricemultiplier":"E",
    "effects":{
    	"hp":200,
    	"rp":3
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":65
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	})

registerItem({
	"name":"Yellow Grass",
    "category":"Plant",
    "sell":5,
    "buy":120,
    "pricemultiplier":"E",
    "effects":{
    	"hp":100,
    	"rp":3
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":39
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	})

registerItem({
	"name":"Corn on the Cob",
    "cookinglevel":52,
    "category":"Oven",
    "sell":1860,
    "buy":6200,
    "pricemultiplier":"C1",
    "effects":{
    	"hp":5000,
        "hpP":20,
        "rp":1000,
        "vit":180,
        },
	"materials":["Corn"]
	})

registerItem({
	"name":"Gold Juice",
    "cookinglevel":99,
    "category":"Mixer",
    "sell":8e5,
    "pricemultiplier":"C1",
    "effects":{
    	"hp":5000,
        "hpP":100,
        "rp":1000,
        "rpP":100,
        "int":100,
        "intP":25,
        "fireresP":10,
        "waterresP":10,
        "earthresP":10,
        "windresP":10
        },
	"materials":["Golden Pumpkin","Emery Flower","Golden Potato",
    	"Golden Turnip","Golden Cabbage"]
})

registerItem({
	"name":"Formula A",
    "chemistrylevel":29,
    "category":"Nutrient",
    "sell":30,
    "buy":1200,
    "pricemultiplier":"Ch",    
	"materials":["Withered Grass","Blue Grass","Black Grass"]
})
    
registerItem({
	"name":"Formula B",
    "chemistrylevel":41,
    "category":"Nutrient",
    "sell":240,
    "buy":3600,
    "pricemultiplier":"Ch",    
	"materials":["Yellow Grass","Pink Cat","4-Leaf Clover"]
})
    
registerItem({
	"name":"Formuade",
    "chemistrylevel":65,
    "category":"Medicine",
    "sell":2500,
    "buy":20000,
    "pricemultiplier":"Ch",
    "effects":{
    	"rpP":75,
        "hpmaxP":-50,
        "str":70,
        "vit":70,
        "int":70,
        "critP":20,
        "psnresP":25,
        "sealresP":25,
        "parresP":25,
        "slpresP":25,
        "ftgresP":25,
        "sickresP":25,
        "faintresP":25
        },
	"materials":["Hot-Hot Fruit"]
})
    
registerItem({
	"name":"Formula C",
    "chemistrylevel":72,
    "category":"Nutrient",
    "sell":500,
    "buy":9800,
    "pricemultiplier":"Ch",    
	"materials":["White Grass","Fireflower","Corn"]
})
    
registerItem({
	"name":"Leveliser",
    "chemistrylevel":96,
    "category":"Medicine",
    "sell":3e3,
    "buy":5e6,
    "pricemultiplier":"Ch",
    "effects":{
    	// None
        },
	"materials":["Emery Flower","4-Leaf Clover","Noel Grass",
    	"Autumn Grass","Fireflower","Hot-Hot Fruit"]
})

registerItem({
	"name":"Great 4-Leaf Clover",
    "category":"Plant",
    "sell":5000,
    "pricemultiplier":"E",
    "effects":{
    	"rp":100
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":52
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	})
    
registerItem({
	"name":"Leveliser",
    "chemistrylevel":99,
    "category":"Medicine",
    "sell":3e3,
    "buy":5e6,
    "pricemultiplier":"Ch",
    "effects":{
    	// None
        },
	"materials":["Great 4-Leaf Clover","Great Emery Flower"]
})

registerItem({
	"name":"Dark Crystal",
    "category":"Crystals",
    "sell":240,
    "buy":1440,
    "pricemultiplier":"E",
	"upgradematerial":{
    	"rarity":1,//unknown
        "difficulty":25,
        "str":3,
        "vit":3
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	})

registerItem({
	"name":"Pink Melon",
    "category":"Vegetable",
    "sell":850,
    "buy":5000,
    "pricemultiplier":"E",
    "effects":{
    	"hp":90,
        "rp":30
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":45,
    	"int":7
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	})

////////////////////////////////////////////////////////////////////////////

function nameComparator(a, b) {
   if (a[0].toLowerCase() < b[0].toLowerCase()){ return -1;
   } else if (a[0].toLowerCase() > b[0].toLowerCase()){ return 1;
   } else {return 0;}
}

function levelComparator(a, b) {
   if (parseInt(a[2]) < parseInt(b[2])){ return -1;
   } else if (parseInt(a[2]) > parseInt(b[2])){ return 1;
   } else {return 0};
}

var sortedMasterNameList = masterNameList.sort(nameComparator);

for (i=0;i<nonUniqueNames.length;i++){
	var currentName = nonUniqueNames[i];
	for (j=0;j<sortedMasterNameList.length;j++){
    	if (sortedMasterNameList[j][0]==currentName){
        	sortedMasterNameList[j][0]+=" ("
            if (sortedMasterNameList[j][3]==0){
        		sortedMasterNameList[j][0]+=1
            } else {
            	sortedMasterNameList[j][0]+=sortedMasterNameList[j][3]
            }
        	sortedMasterNameList[j][0]+=")"
        }
    }
}

var dropdownList = document.createElement("select");
dropdownList.setAttribute("id","itemSelect")
document.getElementById("itemSelectionDiv").appendChild(dropdownList);

var getStatsBtn = document.createElement("button");
getStatsBtn.setAttribute("id","getInfo")
getStatsBtn.setAttribute("onclick","getItemInfo()")
getStatsBtn.innerHTML="Get Item Statistics"
document.getElementById("itemSelectionDiv").appendChild(getStatsBtn);

for (i=0;i<sortedMasterNameList.length;i++){
	var currentNameSet = sortedMasterNameList[i];
	var currentUniqueName = currentNameSet[2];
	option=document.createElement("option");
    document.getElementById("itemSelect").appendChild(option);
    option.innerHTML = currentNameSet[0];
    option.value = currentUniqueName;
}

////////////////////////////////////////////////////////////////
//var currentItem="cornonthecob".convertStringToItem()
//var currentItem="leveliser99".convertStringToItemByListedName()
///////////////////////////////////////////////////////////////
    
var currentItem
var currentSellPrice
var currentBuyPrice
var currentBuyPriceDiscount
        
function getItemInfo(){
	var itemSelected = document.getElementById("itemSelect").value
    currentItem=masterItemList[itemSelected]
    currentSellPrice=currentItem.sell;
    document.getElementById("currentItemDiv").innerHTML = '';
    showBasicStats()
	if (currentItem.materials!==undefined){
    	createMaterialListing()
    }
    //document.getElementById("dependantDiv").innerHTML = '';
    getEffectsTable()
    getUpgradeInfo()
    getProfitTable()
}

function showBasicStats(){
	var nameLine = document.createElement('p');
	var nameString = currentItem.name;
	nameLine.appendChild(document.createTextNode(nameString));
	nameLine.style.fontWeight="bold";
	nameLine.style.fontSize=25;
	nameLine.style.fontFamily="comic sans ms";
	document.getElementById('currentItemDiv').appendChild(nameLine);

	var basicStats = document.createElement('p');
	document.getElementById('currentItemDiv').appendChild(basicStats);
	var basicStatsString = "Category: "+currentItem.category
	var node = document.createTextNode(basicStatsString);
	basicStats.appendChild(node);
	basicStats.innerHTML+="<br>";
	if (currentItem.cookinglevel!==undefined){
		basicStats.innerHTML+="Cooking Lv: "+currentItem.cookinglevel
    }
	if (currentItem.forginglevel!==undefined){
		basicStats.innerHTML+="Forging Lv: "+currentItem.forginglevel
    }
	if (currentItem.craftinglevel!==undefined){
		basicStats.innerHTML+="Crafting Lv: "+currentItem.craftinglevel
    }
	if (currentItem.chemistrylevel!==undefined){
		basicStats.innerHTML+="Chemistry Lv: "+currentItem.chemistrylevel
    }

	if (currentItem.buy!==undefined){
		currentBuyPrice=currentItem.buy;
		currentBuyPriceDiscount=Math.ceil(currentBuyPrice*.9);
	}

	var priceLine = document.createElement('p');
	document.getElementById('currentItemDiv').appendChild(priceLine);
	var priceString="Base Sell Price: "+currentSellPrice+" G";
	var node = document.createTextNode(priceString);
	priceLine.appendChild(node);
	if (currentItem.buy!==undefined){
		priceLine.innerHTML+="<br>Base Buy Price: "+currentBuyPrice+" G";
		priceLine.innerHTML+=" (with discount: "+currentBuyPriceDiscount+" G)";
	}
}
    
var materialsList

var currentMaterialsBuyPrice
var currentMaterialsBuyPriceDiscount

function createMaterialListing(){

	currentMaterialsBuyPrice = 0
    currentMaterialsBuyPriceDiscount = 0

	if (currentItem.materials!==undefined){
		var materialsList = document.createElement('p');
		var materialsListString = "Materials: "
		var node = document.createTextNode(materialsListString);
		materialsList.appendChild(node);
    	for (j=0;j<currentItem.materials.length;j++){
    		var currentMaterial = currentItem.materials[j].convertStringToItem()
    		materialsList.innerHTML+="<br>"+(j+1)+". "+currentMaterial.name
			if (currentMaterial.buy!==undefined){
        		currentMaterialBuy=currentMaterial.buy;
				currentMaterialsBuyPrice+=currentMaterialBuy;
    			currentMaterialsBuyPriceDiscount+=Math.ceil(currentMaterialBuy*.9);
    			materialsList.innerHTML+=" (buy: "+currentMaterial.buy+" G, discounted: "
        		materialsList.innerHTML+=Math.ceil(currentMaterial.buy*.9)+" G)"
        	} else {
    			materialsList.innerHTML+=" (cannot be bought)"
        	}
    	}
    
    	if (currentMaterialsBuyPrice>0){
			materialsList.innerHTML+="<br><br>Total cost of buyable materials: "+currentMaterialsBuyPrice+" G "
			materialsList.innerHTML+="(all discounted: "+currentMaterialsBuyPriceDiscount+" G)"
        
        	if (currentItem.buy==undefined){
        		materialsList.innerHTML+="<br>This item cannot be bought and must be produced."
        	} else if (allMaterialsBuyable(currentItem.materials)){
            	if (currentMaterialsBuyPrice>currentItem.buy){
        			materialsList.innerHTML+="<br>Assuming no discounts, it is cheaper to "
            		materialsList.innerHTML+="<span style='font-weight:bold'>buy the product directly</span>";
            		materialsList.innerHTML+=" than buying and processing the materials."
        		} else {
        			materialsList.innerHTML+="<br>Assuming no discounts, it is cheaper to "
            		materialsList.innerHTML+="<span style='font-weight:bold'>buy and process the materials</span>";
            		materialsList.innerHTML+=" than buying the product directly."
				}
        	}
        
    	} else {
    		materialsList.innerHTML+="<br><br>None of the materials can be bought."
    	}
    }
    document.getElementById('currentItemDiv').appendChild(materialsList)
}

// Section for level independent stats like upgrade info
var independentStats

var dependentStats

function getUpgradeInfo(){
	independentStats = document.createElement('p');
	independentStats.innerHTML=""
	if (currentItem.upgradeinfo!==undefined){ //Effects of item when used for upgrades
		var currentUpgradeInfo=currentItem.upgradeinfo
		var upgradeInfoSection=document.createElement('p');
		var upgradeInfoString="UPGRADE INFO";
		var node = document.createTextNode(upgradeInfoString);
		upgradeInfoSection.appendChild(node);
    
	    if (currentUpgradeInfo.hp!==undefined){
			upgradeInfoSection.innerHTML+="<br>HP: "+currentEffects.hp
        }
    
	    // Upgrade effects are level independent
	    independentStats.appendChild(upgradeInfoSection)
	    }

	if (independentStats.hasChildNodes()){
		document.getElementById('currentItemDiv').appendChild(independentStats);
    }
}

function getEffectsTable(){
	// Section for level dependent stats like effects
	dependentStats = document.getElementById('dependantDiv');
    if (dependentStats.hasChildNodes()){
		dependentStats.innerHTML=""
	}
	if (currentItem.effects!==undefined){ //Effects of item when ingested
		var currentEffects=currentItem.effects
		var effectsSectionHeader=document.createElement('p');
		effectsSectionHeader.innerHTML="<span style='font-weight:bold'>EFFECTS</span>";
    
	    if (currentEffects.heal!==undefined){
	    	effectsSectionHeader.innerHTML+="<br>Heal: "
	        for (i=0;i<currentEffects.heal.length;i++){
	        	var currentHeal=currentEffects.heal[i];
	        	effectsSectionHeader.innerHTML+=" "+currentHeal
	        }
	    }
    
	    if (currentEffects.statusailments!==undefined){
    		effectsSectionHeader.innerHTML+="<br>Status Ailments:"
        	for (i=0;i<currentEffects.statusailments.length;i++){
        		var currentAilment=currentEffects.statusailments[i];
        		effectsSectionHeader.innerHTML+=" "+currentAilment
        	}
    	}
    
    	var effectsValueArray=[];
    	var effectsTypeArray=[];
    
    	var effectsTypeMax100=["HP (%)","RP (%)"];
    	var effectsTypeMax200=["Fire Res (%)","Water Res (%)",
    		"Earth Res (%)","Wind Res (%)",
        	"Light Res (%)","Dark Res (%)","Love Res (%)"];
    	var effectsTypeMinNeg100=["HP (%)","RP (%)",
    		"HP max (%)","RP max (%)",
    		"STR (%)","VIT (%)","INT (%)"];
    
		var effectsTable = document.createElement('table'), tr, td, row, cell;

    	dependentStats.appendChild(effectsSectionHeader) // Effects are level dependent
    	dependentStats.appendChild(effectsTable)

		effectsTableHeader=document.createElement('tr');
		effectsTable.appendChild(effectsTableHeader);

		c1 = document.createElement('td');
		effectsTableHeader.appendChild(c1);
		c1.innerHTML="Lv.";
    
    	function appendEffectsHeader(value,string){
    		if (value!==undefined){
    			c=document.createElement('td');
				effectsTableHeader.appendChild(c);
				c.innerHTML=string;
        		effectsValueArray.push(value);
        		effectsTypeArray.push(string);
        	}
    	}

		appendEffectsHeader(currentEffects.hp,"HP");
		appendEffectsHeader(currentEffects.hpP,"HP (%)");
		appendEffectsHeader(currentEffects.rp,"RP");
		appendEffectsHeader(currentEffects.rpP,"RP (%)");
    
		appendEffectsHeader(currentEffects.hpmax,"HP max");
		appendEffectsHeader(currentEffects.hpmaxP,"HP max (%)");
		appendEffectsHeader(currentEffects.rpmax,"RP max");
		appendEffectsHeader(currentEffects.rpmaxP,"RP max (%)");
    
		appendEffectsHeader(currentEffects.str,"STR");
		appendEffectsHeader(currentEffects.strP,"STR (%)");
		appendEffectsHeader(currentEffects.vit,"VIT");
    	appendEffectsHeader(currentEffects.vitP,"VIT (%)");
		appendEffectsHeader(currentEffects.int,"INT");
		appendEffectsHeader(currentEffects.intP,"INT (%)");
    
    	appendEffectsHeader(currentEffects.fireresP,"Fire Res (%)");
    	appendEffectsHeader(currentEffects.waterresP,"Water Res (%)");
    	appendEffectsHeader(currentEffects.earthresP,"Earth Res (%)");
    	appendEffectsHeader(currentEffects.windresP,"Wind Res (%)");
    	appendEffectsHeader(currentEffects.lightresP,"Light Res (%)");
    	appendEffectsHeader(currentEffects.darkresP,"Dark Res (%)");
    	appendEffectsHeader(currentEffects.loveresP,"Love Res (%)");
    
    	appendEffectsHeader(currentEffects.critP,"Crit (%)");
    
    	appendEffectsHeader(currentEffects.critresP,"Crit Res (%)");
    	appendEffectsHeader(currentEffects.knockresP,"Knock Res (%)");
    
    	appendEffectsHeader(currentEffects.psnresP,"Psn Res (%)");
    	appendEffectsHeader(currentEffects.sealresP,"Seal Res (%)");
    	appendEffectsHeader(currentEffects.parresP,"Par Res (%)");
    	appendEffectsHeader(currentEffects.slpresP,"Slp Res (%)");
    	appendEffectsHeader(currentEffects.ftgresP,"Ftg Res (%)");
    	appendEffectsHeader(currentEffects.sickresP,"Sick Res (%)");
    	appendEffectsHeader(currentEffects.faintresP,"Faint Res (%)");
    
    	appendEffectsHeader(currentEffects.psnatkP,"Psn Atk (%)")
    
    	function appendRow(rowid,value){
    		td1 = document.createElement('td');
    		rowid.appendChild(td1);
    		td1.innerHTML = value;
    	}
    
    	for (row = 0; row < maxLv; row++) {
    		tr = document.createElement('tr');
    	    effectsTable.appendChild(tr)
    	
    		td1 = document.createElement('td');
    		tr.appendChild(td1);
    		td1.innerHTML = row+1;
    	    
    	    var integerCorrector=1e6;
    	    var effectsMultiplier = statMultiplier[row]*integerCorrector
        
    	    for (j=0;j<effectsValueArray.length;j++){
    	    	var currentEffectsValueModified = effectsMultiplier*effectsValueArray[j]
    	        var currentEffectsValue= currentEffectsValueModified/integerCorrector;
    	    	var currentEffectsType = effectsTypeArray[j];
    	    	if (currentEffectsType.includes("%")){
    	        	var appendValue = Math.ceil(currentEffectsValue);
    	            if (stringIsInArray(effectsTypeMax200,currentEffectsType)){
    	            	appendValue = Math.min(200,appendValue)
    	            }
    	            if (stringIsInArray(effectsTypeMax100,currentEffectsType)){
    	            	appendValue = Math.min(100,appendValue)
    	            }
    	            if (stringIsInArray(effectsTypeMinNeg100,currentEffectsType)){
    	            	appendValue = Math.max(-100,appendValue)
    	            }
                } else {
                var appendValue = Math.floor(currentEffectsValue);
                }
            	appendRow(tr,appendValue)
        	}
        
        }

	
    }
}

function getProfitTable(){
	
    var profitTable = document.createElement('table'), tr, td, row, cell;
	var profitTableHeader=document.createElement('tr');
	profitTable.appendChild(profitTableHeader);

	function appendToProfitHeader(string){
		var c = document.createElement('td');
		profitTableHeader.appendChild(c);
		c.innerHTML=string;
	}

	appendToProfitHeader("Lv.");
	appendToProfitHeader("Multiplier<br>(Type: "+currentItem.pricemultiplier+")");
	var c3header="Sell Price<br>of "
	if (currentItem.materials!==undefined){
		c3header+="Product";
	    } else {
	    c3header+="Item";
	    }
	appendToProfitHeader(c3header)
	appendToProfitHeader("Increment from<br>previous level")

	var profitArray=[];
	var previousPrice;
	
	var levelColumn=[];
	var multiplierColumn=[];
	var sellPriceColumn=[];
	var incrementColumn=[];
	var profitColumn=[];
	var discountedProfitColumn=[];
	var opportunityCostColumn=[];
	var opportunityProfitColumn=[];
	var returnOnInvestmentColumn=[];
	
	var currentMultiplierArray=getPriceMultiplierArray(currentItem.pricemultiplier)

	for (i=0;i<maxLv;i++){
		levelColumn.push(i+1);
	    var currentMultiplier=currentMultiplierArray[i]
		multiplierColumn.push(currentMultiplier.toPrecision(3));
	    sellPriceColumn.push(getSellPriceAtLevel(currentItem,i+1))
	    if (i==0){
	    	incrementColumn.push("N/A")
	    } else {
	    	incrementColumn.push(getSellPriceAtLevel(currentItem,i+1)-previousPrice)
	    }
	    previousPrice=getSellPriceAtLevel(currentItem,i+1)
	}

	if (canProduceAtVaryingLevels(currentItem)||canBuyAtVaryingLevels(currentItem)){

		document.getElementById('profitTable').innerHTML="<b>Profitability by Level</b>"

		if (currentItem.materials!==undefined){
    		if (allMaterialsBuyable(currentItem.materials)){
    			appendToProfitHeader("Profit<br>(w/o D)");
				appendToProfitHeader("Profit<br>(w/ D)");
            }
    
			if (allMaterialsBuyable(currentItem.materials)){
        		column6 = document.createElement('td');
            	profitTableHeader.appendChild(column6);
            	column6.innerHTML="Opportunity<br>Cost";
            	column6.align="center";
            
        		column7 = document.createElement('td');
				profitTableHeader.appendChild(column7);
				column7.innerHTML="Opportunity<br>Profit";
    			column7.align="center";
			}
    	} else if (currentItem.buy!==undefined){
    		appendToProfitHeader("Profit<br>(w/o D)");
			appendToProfitHeader("Profit<br>(w/ D)");
    	}

		for (row = 0; row < maxLv; row++) {
    
		var sellPrice=getSellPriceAtLevel(currentItem,row+1);
		var sellPriceOfMaterials=sellPrice;

			if (currentItem.materials!==undefined){
        		var buyPrice=currentMaterialsBuyPrice;
        		var buyPriceDiscount=currentMaterialsBuyPriceDiscount
            	var sellPriceOfMaterials=0;
            
            	for (j=0;j<currentItem.materials.length;j++){
            		var currentMaterial=currentItem.materials[j].convertStringToItem();
                	sellPriceOfMaterials+=getSellPriceAtLevel(currentMaterial,row+1)
            	}
                
    			if (allMaterialsBuyable(currentItem.materials)){
        			profitColumn.push(sellPrice-buyPrice);
    				profitWDiscount = sellPrice-buyPriceDiscount;
    				discountedProfitColumn.push(profitWDiscount);
                	opportunityCostColumn.push(sellPriceOfMaterials);
                	opportunityProfitColumn.push(sellPriceOfMaterials-buyPrice);
				}
                
			} else {
        		var buyPrice=currentItem.buy
        		var buyPriceDiscount=Math.ceil(.9*currentItem.buy)
        	
            	if(currentItem.buy!==undefined){
            
            		profitColumn.push(sellPrice-buyPrice);
                	profitWDiscount = sellPrice-buyPriceDiscount;
                	discountedProfitColumn.push(profitWDiscount)
				}
			}
		}
    
		var footer=document.createElement('p')
		footer.innerHTML="Red denotes <span style='color:#FF0000'>not profitable</span> at the specified level.<br>"
		footer.innerHTML+="Blue denotes profit only if the "
    	footer.innerHTML+="<span style='color:#87CEFA'>materials are discounted</span>.<br>"
		footer.innerHTML+="Green denotes <span style='color:#00FF00'>profit</span> at the specified level.<br>"
    	footer.innerHTML+="Violet denotes higher profit from "
    	footer.innerHTML+="<span style='color:#FF00FF'>selling the materials directly</span> than the product.<br>"
    	footer.innerHTML+="Underlined denotes higher profit from "
    	footer.innerHTML+="<span style='text-decoration:underline'>buying and selling the materials</span>"
    	footer.innerHTML+=" directly than buying and converting the materials to this product."
    
    	footer.innerHTML+="<br><br>Opportunity cost: total sell price of materials."
    	footer.innerHTML+="<br>Opportunity profit: total sell price of materials minus total buy price of materials."
    	
    	footer.style.color="yellow"
    
    	} else {
		//document.getElementById('profitTable').innerHTML="<b>Profit table is not applicable.</b>"
    	document.getElementById('profitTable').innerHTML="<b>Price by Level</b>"
    	}
        
	profitArray.arrayPush(levelColumn);
	profitArray.arrayPush(multiplierColumn);
	profitArray.arrayPush(sellPriceColumn);
	profitArray.arrayPush(incrementColumn);
	profitArray.arrayPush(profitColumn);
	profitArray.arrayPush(discountedProfitColumn);
	profitArray.arrayPush(opportunityCostColumn);
	profitArray.arrayPush(opportunityProfitColumn);
	profitArray.arrayPush(returnOnInvestmentColumn);

	for (row=0;row<maxLv;row++){
	    tr = document.createElement('tr');
	    
	    for (col=0;col<profitArray.length/maxLv;col++){
	    	td = document.createElement('td');
	    	tr.appendChild(td);
	        var currentValue = profitArray[row+maxLv*col];
	    	td.innerHTML = currentValue;
	        if ([3,6,7].indexOf(col) > -1){
    	    	td.align="center";
    	    }
        
    	    if (col==4){
        		if (0>currentValue){
        			td.style.color="red"
            	} else if (currentValue>0){
            		td.innerHTML="<span style='color:#00FF00'>"+td.innerHTML+"</span>";
            	    td.style.fontWeight="bold";
            	    td.style.fontSize=18;
            	}
        	}
        
        	if (col==5){
        		if (0>currentValue){
        			td.style.color="red";
        	    } else if (currentValue>0){
        	    	td.style.color="lightskyblue";
        	        td.style.fontWeight="bold";
        	        if (profitArray[row+maxLv*(col-1)]>0){
        	        	td.innerHTML="<span style='color:#00FF00'>"+td.innerHTML+"</span>";
        	        	td.style.fontSize=18;
        	        }
        	    }
        	}
        
        	if (col==6){
        		if (currentValue>profitArray[row+maxLv*(col-4)]){
        	    	td.style.color="violet";
        			td.style.fontWeight="bold";
					td.style.fontSize=18;
        	    }
        	}
        
        	if (col==7){
        		if (currentValue>profitArray[row+maxLv*(col-2)]){
        	    	td.style.textDecoration="underline";
					td.style.fontSize=18;
        	    }
        	}
		}
    
    	profitTable.appendChild(tr);
	}
    
	document.getElementById('profitTable').appendChild(profitTable);
	if (footer!==undefined){
		document.getElementById('profitTable').appendChild(footer);
	}
}
</script>
