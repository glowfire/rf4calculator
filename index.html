<html>
	<LINK href="stylesheets/stylesheet.css" rel="stylesheet" type="text/css">
<div id="currentItemDiv">
</div>

<div id="dependantDiv">
</div>

<div id="profitTableDiv">
<p id="profitTable"></p>
</div>

<div id="multiplierTableDiv">
<button id="multiplierTable" onclick="showMultiplierTable()">Show Multiplier Table</button>
</div>	
</html>

<script>

var turnip = {
	"name":"Turnip",
    "category":"Vegetable",
    "sell":30,
    "buy":200,
    "pricemultiplier":"E",
    "effects":{
    	"hp":30,
        "rp":5
        },
	"upgradeinfo":{
    	"rarity":1,
        "difficulty":1,
    	"str":1
        },
	"ingredienteffects":{
    	"hp":2
        }
	}

var pinkTurnip = {
	"name":"Pink Turnip",
    "category":"Vegetable",
    "sell":200,
    "buy":700,
    "pricemultiplier":"E",
    "effects":{
    	"hp":70,
        },
	"upgradeinfo":{
    	"rarity":1,
        "difficulty":21,
    	"str":4
        },
	"ingredienteffects":{
    	"hp":2//unknown
        }
	}

var goldenPumpkin = {
	"name":"Golden Pumpkin",
    "category":"Vegetable",
    "sell":4000,
    "buy":2e4,
    "pricemultiplier":"E",
    "effects":{
    	"hp":400
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":56,
    	"str":25,
        "faintatkP":1
        },
	"ingredienteffects":{
    	"hp":2//unknown
        }
	}

var goldenPotato = {
	"name":"Golden Potato",
    "category":"Vegetable",
    "sell":6e3,
    "buy":3e4,
    "pricemultiplier":"E",
    "effects":{
    	"hp":350
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":55,
    	"vit":30,
        "faintatkP":1
        },
	"ingredienteffects":{
    	"hp":2//unknown
        }
	}

var goldenCabbage = {
	"name":"Golden Cabbage",
    "category":"Vegetable",
    "sell":11500,
    "buy":5e4,
    "pricemultiplier":"E",
    "effects":{
    	"hp":500
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":59,
    	"int":20,
        "faintatkP":1
        },
	"ingredienteffects":{
    	"hp":2//unknown
        }
	}

var goldenTurnip = {
	"name":"Golden Turnip",
    "category":"Vegetable",
    "sell":2e4,
    "buy":1e5,
    "pricemultiplier":"E",
    "effects":{
    	"hp":800
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":67,
    	"str":30,
        "faintatkP":1
        },
	"ingredienteffects":{
    	"hp":2//unknown
        }
	}

var corn = {
	"name":"Corn",
    "category":"Vegetable",
    "sell":1000,
    "buy":3000,
    "pricemultiplier":"E",
    "effects":{
    	"hp":75
        },
	"upgradeinfo":{
    	"rarity":1,
        "difficulty":1,
    	"vit":6
        },
	"ingredienteffects":{
    	"rp":20
		}
	}

var hotHotFruit = {
	"name":"Hot-Hot Fruit",
    "category":"Vegetable",
    "sell":900,
    "buy":7000,
    "pricemultiplier":"E",
    "effects":{
    	// None
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":35,
    	"mdef":7,
        "fireresP":5
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	}

var pinkMelon = {
	"name":"Pink Melon",
    "category":"Vegetable",
    "sell":850,
    "buy":5000,
    "pricemultiplier":"E",
    "effects":{
    	"hp":90,
        "rp":30
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":45,
    	"int":7
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	}

var strawberry = {
	"name":"Strawberry",
    "category":"Fruit",
    "sell":135,
    "buy":800,
    "pricemultiplier":"E",
    "effects":{
    	"hp":35,
        "rp":15
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":24,
    	"str":3,
        "vit":3
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	}

var pinkCat = {
	"name":"Pink Cat",
    "category":"Plant",
    "sell":110,
    "buy":450,
    "pricemultiplier":"E",
    "effects":{
    	"rp":25
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":15,
        "int":2
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	}

var fireflower = {
	"name":"Fireflower",
    "category":"Plant",
    "sell":2800,
    "buy":10000,
    "pricemultiplier":"E",
    "effects":{
    	"rp":70
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":41,
    	"str":2,
        "int":6
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	}

var autumnGrass = {
	"name":"Autumn Grass",
    "category":"Plant",
    "sell":1800,
    "buy":6000,
    "pricemultiplier":"E",
    "effects":{
    	"rp":60
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":35,
    	"slpresp":6
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	}

var emeryFlower = {
	"name":"Emery Flower",
    "category":"Plant",
    "sell":55000,
    "buy":5e5,
    "pricemultiplier":"E",
    "effects":{
    	"rp":300
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":66,
        "int":30
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	}

var leafClover = {
	"name":"4-Leaf Clover",
    "category":"Plant",
    "sell":980,
    "buy":4000,
    "pricemultiplier":"E",
    "effects":{
    	"rp":50
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":29
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	}

var noelGrass = {
	"name":"Noel Grass",
    "category":"Plant",
    "sell":2000,
    "buy":6660,
    "pricemultiplier":"E",
    "effects":{
    	"rp":75
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":41,
        "int":7
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	}

var greatEmeryFlower = {
	"name":"Great Emery Flower",
    "category":"Plant",
    "sell":25*1e4,
    "pricemultiplier":"E",
    "effects":{
    	"rp":500
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":95,
        "int":80
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	}

var witheredGrass = {
	"name":"Withered Grass",
    "category":"Plant",
    "sell":1,
    "buy":100,
    "pricemultiplier":"E",
    "effects":{
    	"statusailments":["PSN"],
    	"rpP":-20
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":1,
        "vit":-1
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	}

var blueGrass = {
	"name":"Blue Grass",
    "category":"Plant",
    "sell":5,
    "buy":120,
    "pricemultiplier":"E",
    "effects":{
    	"hp":30,
    	"rp":3
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":11
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	}

var blackGrass = {
	"name":"Black Grass",
    "category":"Plant",
    "sell":5,
    "buy":120,
    "pricemultiplier":"E",
    "effects":{
    	"hp":50,
    	"rp":3
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":23
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	}

var whiteGrass = {
	"name":"White Grass",
    "category":"Plant",
    "sell":5,
    "buy":120,
    "pricemultiplier":"E",
    "effects":{
    	"hp":200,
    	"rp":3
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":65
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	}

var yellowGrass = {
	"name":"Yellow Grass",
    "category":"Plant",
    "sell":5,
    "buy":120,
    "pricemultiplier":"E",
    "effects":{
    	"hp":100,
    	"rp":3
        },
	"upgradeinfo":{
    	"rarity":1,//unknown
        "difficulty":39
        },
	"ingredienteffects":{
    	"rp":20//unknown
		}
	}
    
var pickledTurnip4 = {
	"name":"Pickled Turnip",
    "cookinglevel":4,
    "category":"No Tool",
    "sell":48,
    "buy":400,
    "pricemultiplier":"C1",
    "effects":{
    	"hp":250,
        "rp":100,
        "str":5,
        "vit":3,
        "int":5
        },
	"materials":[turnip]
	}
    
var pickledTurnip12 = {
	"name":"Pickled Turnip",
    "cookinglevel":12,
    "category":"No Tool",
    "sell":48,
    "buy":400,
    "pricemultiplier":"C1",
    "effects":{
    	"hp":250,
        "rp":100,
        "str":5,
        "vit":3,
        "int":5
        },
	"materials":[pinkTurnip]
	}
    
var cornOnTheCob = {
	"name":"Corn on the Cob",
    "cookinglevel":52,
    "category":"Oven",
    "sell":1860,
    "buy":6200,
    "pricemultiplier":"C1",
    "effects":{
    	"hp":5000,
        "hpP":20,
        "rp":1000,
        "vit":180,
        },
	"materials":[corn]
	}
    
var preludeToLove = {
	"name":"Prelude to Love",
    "cookinglevel":61,
    "category":"Mixer",
    "sell":2600,
    "buy":11200,
    "pricemultiplier":"C1",
    "effects":{
    	"hp":5000,
        "hpP":68,
        "rp":1000,
        "hpmaxP":-50,
        "rpmaxP":-50,
        "vitP":-50,
        "fireresP":50,
        "waterresP":50,
        "earthresP":50,
        "windresP":50,
        "lightresP":50,
        "darkresP":50,
        "loveresP":100
        },
	"materials":[pinkMelon,strawberry]
}
    
var turnipHeaven = {
	"name":"Turnip Heaven",
    "cookinglevel":96,
    "category":"No Tool",
    "sell":150000,
    "buy":542000,
    "pricemultiplier":"C1",
    "effects":{
    	"hp":5000,
        "hpP":90,
        "rp":1000,
        "rpP":90,
        "str":90,
        "strP":12,
        "vit":80,
        "vitP":15,
        "int":50,
        "intp":10,
        "fireresP":20,
        "lightresP":20,
        "darkresP":20
        },
	"materials":[turnip,pinkTurnip,goldenTurnip]
}
    
var goldJuice = {
	"name":"Gold Juice",
    "cookinglevel":99,
    "category":"Mixer",
    "sell":8e5,
    "pricemultiplier":"C1",
    "effects":{
    	"hp":5000,
        "hpP":100,
        "rp":1000,
        "rpP":100,
        "int":100,
        "intP":25,
        "fireresP":10,
        "waterresP":10,
        "earthresP":10,
        "windresP":10
        },
	"materials":[goldenPumpkin,emeryFlower,goldenPotato,goldenTurnip,goldenCabbage]
}
    
var formulaA = {
	"name":"Formula A",
    "chemistrylevel":29,
    "category":"Nutrient",
    "sell":30,
    "buy":1200,
    "pricemultiplier":"Ch",    
	"materials":[witheredGrass,blueGrass,blackGrass]
}
    
var formulaB = {
	"name":"Formula B",
    "chemistrylevel":41,
    "category":"Nutrient",
    "sell":240,
    "buy":3600,
    "pricemultiplier":"Ch",    
	"materials":[yellowGrass,pinkCat,leafClover]
}
    
var formuade65 = {
	"name":"Formuade",
    "chemistrylevel":65,
    "category":"Medicine",
    "sell":2500,
    "buy":20000,
    "pricemultiplier":"Ch",
    "effects":{
    	"rpP":75,
        "hpmaxP":-50,
        "str":70,
        "vit":70,
        "int":70,
        "critP":20,
        "psnresP":25,
        "sealresP":25,
        "parresP":25,
        "slpresP":25,
        "ftgresP":25,
        "sickresP":25,
        "faintresP":25
        },
	"materials":[hotHotFruit]
}
    
var formulaC = {
	"name":"Formula C",
    "chemistrylevel":72,
    "category":"Nutrient",
    "sell":500,
    "buy":9800,
    "pricemultiplier":"Ch",    
	"materials":[whiteGrass,fireflower,corn]
}
    
var leveliser96 = {
	"name":"Leveliser",
    "chemistrylevel":96,
    "category":"Medicine",
    "sell":3e3,
    "buy":5e6,
    "pricemultiplier":"Ch",
    "effects":{
    	// None
        },
	"materials":[emeryFlower,leafClover,noelGrass,autumnGrass,fireflower,hotHotFruit]
}

var currentItem=pickledTurnip12;

var nameLine = document.createElement('p');
var nameString = currentItem.name;
nameLine.appendChild(document.createTextNode(nameString));
nameLine.style.color="darkgreen";
nameLine.style.fontWeight="bold";
nameLine.style.fontSize=25;
nameLine.style.fontFamily="comic sans ms";

var basicStats = document.createElement('p');
var basicStatsString = "Category: "+currentItem.category
var node = document.createTextNode(basicStatsString);
basicStats.appendChild(node);
basicStats.innerHTML+="<br>";
if (currentItem.cookinglevel!==undefined){
	basicStats.innerHTML+="Cooking Lv: "+currentItem.cookinglevel
    }
if (currentItem.forginglevel!==undefined){
	basicStats.innerHTML+="Forging Lv: "+currentItem.forginglevel
    }
if (currentItem.craftinglevel!==undefined){
	basicStats.innerHTML+="Crafting Lv: "+currentItem.craftinglevel
    }
if (currentItem.chemistrylevel!==undefined){
	basicStats.innerHTML+="Chemistry Lv: "+currentItem.chemistrylevel
    }
    
var currentSellPrice=currentItem.sell;

if (currentItem.buy!==undefined){
	var currentBuyPrice=currentItem.buy;
	var currentBuyPriceDiscount=Math.ceil(currentBuyPrice*.9);
}

var currentMaterialsBuyPrice=0;
var currentMaterialsBuyPriceDiscount=0;

function allMaterialsBuyable(materialsArray){
	var foo=true
    for (i=0;i<materialsArray.length;i++){
    	var currentMaterial = materialsArray[i];
        if (currentMaterial.buy==undefined){
        	foo=false;
            break;
            }
		}
	return foo
    }

if (currentItem.materials!==undefined){
	var materialsList = document.createElement('p');
	var materialsListString = "Materials: "
	var node = document.createTextNode(materialsListString);
	materialsList.appendChild(node);
    for (i=0;i<currentItem.materials.length;i++){
    	var currentMaterial = currentItem.materials[i]
    	materialsList.innerHTML+="<br>"+(i+1)+". "+currentMaterial.name
		if (currentMaterial.buy!==undefined){
        	currentMaterialBuy=currentMaterial.buy;
			currentMaterialsBuyPrice+=currentMaterialBuy;
    		currentMaterialsBuyPriceDiscount+=Math.ceil(currentMaterialBuy*.9);
    		materialsList.innerHTML+=" (buy: "+currentMaterial.buy+" G, discounted: "
        	materialsList.innerHTML+=Math.ceil(currentMaterial.buy*.9)+" G)"
        } else {
    		materialsList.innerHTML+=" (cannot be bought)"
        }
    }
    
    if (currentMaterialsBuyPrice>0){
		materialsList.innerHTML+="<br><br>Total cost of buyable materials: "+currentMaterialsBuyPrice+" G "
		materialsList.innerHTML+="(all discounted: "+currentMaterialsBuyPriceDiscount+" G)"
        
        if (currentItem.buy==undefined){
        	materialsList.innerHTML+="<br>This item cannot be bought and must be produced."
        } else if (currentMaterialsBuyPrice>currentItem.buy){
        	materialsList.innerHTML+="<br>Assuming no discounts, it is cheaper to "
            materialsList.innerHTML+="<span style='font-weight:bold'>buy the product directly</span>";
            materialsList.innerHTML+=" than buying and processing the materials."
        } else {
        	materialsList.innerHTML+="<br>Assuming no discounts, it is cheaper to "
            materialsList.innerHTML+="<span style='font-weight:bold'>buy and process the materials</span>";
            materialsList.innerHTML+=" than buying the product directly."
        }
        
    } else {
    	materialsList.innerHTML+="<br><br>None of the materials can be bought."
    }
    }

var priceLine = document.createElement('p');
var priceString="Base Sell Price: "+currentSellPrice+" G";
var node = document.createTextNode(priceString);
priceLine.appendChild(node);
if (currentItem.buy!==undefined){
	priceLine.innerHTML+="<br>Base Buy Price: "+currentBuyPrice+" G";
	priceLine.innerHTML+=" (with discount: "+currentBuyPriceDiscount+" G)";
}

// Section for level independent stats like upgrade info
var independentStats = document.createElement('p');

// Section for level dependent stats like effects
var dependentStats = document.getElementById('dependantDiv');

if (currentItem.upgradeinfo!==undefined){ //Effects of item when used for upgrades
	var currentUpgradeInfo=currentItem.upgradeinfo
	var upgradeInfoSection=document.createElement('p');
	var upgradeInfoString="UPGRADE INFO";
	var node = document.createTextNode(upgradeInfoString);
	upgradeInfoSection.appendChild(node);
    
    if (currentUpgradeInfo.hp!==undefined){
		upgradeInfoSection.innerHTML+="<br>HP: "+currentEffects.hp
        }
    
    // Upgrade effects are level independent
    independentStats.appendChild(upgradeInfoSection)
    }


document.getElementById('currentItemDiv').appendChild(nameLine);
document.getElementById('currentItemDiv').appendChild(basicStats);
document.getElementById('currentItemDiv').appendChild(priceLine);
if (independentStats.hasChildNodes()){
	document.getElementById('currentItemDiv').appendChild(independentStats);
    }
if (currentItem.materials!==undefined){
	document.getElementById('currentItemDiv').appendChild(materialsList);
    }

var maxLv=10;

var statMultiplier=[1];
var priceMultiplierE=[1];
var priceMultiplierC1=[1,1.05,1.1,1.15,1.25,1.4,1.6,2,2.5,3];
var priceMultiplierC2=[1,1.05,1.1,1.15,1.25,1.5,2,2.5,3,4];
var priceMultiplierC3=[1,1.05,1.1,1.15,1.25,1.5,2,3,4,5];
var priceMultiplierCh=[1];
var priceMultiplierX=[1];

for (i=1;i<maxLv;i++){
    
    priceMultiplierX.push(1);

	var lastElementStat=statMultiplier[i-1];
    var currentElementStat=lastElementStat+.125;
    statMultiplier.push(currentElementStat);

	var lastElementCh=priceMultiplierCh[i-1];
    var currentElementCh=lastElementCh+.05;
	var lastElementE=priceMultiplierE[i-1];
    var currentElementE=lastElementE+.1;
    if (i==(maxLv-1)){
		currentElementCh=lastElementCh+2*.05;
		currentElementE=lastElementE+2*.1;
        }
    priceMultiplierCh.push(currentElementCh);
    priceMultiplierE.push(currentElementE);
        
}

if (currentItem.effects!==undefined){ //Effects of item when ingested
	var currentEffects=currentItem.effects
	var effectsSectionHeader=document.createElement('p');
	effectsSectionHeader.innerHTML="<span style='font-weight:bold'>EFFECTS</span>";
    
    if (currentEffects.heal!==undefined){
    	effectsSectionHeader.innerHTML+="<br>Heal: "
        for (i=0;i<currentEffects.heal.length;i++){
        	var currentHeal=currentEffects.heal[i];
        	effectsSectionHeader.innerHTML+=" "+currentHeal
        }
    }
    
    if (currentEffects.statusailments!==undefined){
    	effectsSectionHeader.innerHTML+="<br>Status Ailments:"
        for (i=0;i<currentEffects.statusailments.length;i++){
        	var currentAilment=currentEffects.statusailments[i];
        	effectsSectionHeader.innerHTML+=" "+currentAilment
        }
    }
    
    var effectsValueArray=[];
    var effectsTypeArray=[];
    
    var effectsTypeMax100=["HP (%)","RP (%)"];
    var effectsTypeMax200=["Fire Res (%)","Water Res (%)",
    	"Earth Res (%)","Wind Res (%)",
        "Light Res (%)","Dark Res (%)","Love Res (%)"];
    var effectsTypeMinNeg100=["HP (%)","RP (%)",
    	"HP max (%)","RP max (%)",
    	"STR (%)","VIT (%)","INT (%)"];
        
	function stringIsInArray(arrayOfStrings,string){
    	var foo=false;
        if (arrayOfStrings.indexOf(string) > -1){
        	foo=true;
            }
		return foo;
    }
    
	var effectsTable = document.createElement('table'), tr, td, row, cell;

    dependentStats.appendChild(effectsSectionHeader) // Effects are level dependent
    dependentStats.appendChild(effectsTable)

	effectsTableHeader=document.createElement('tr');
	effectsTable.appendChild(effectsTableHeader);

	c1 = document.createElement('td');
	effectsTableHeader.appendChild(c1);
	c1.innerHTML="Lv.";
    
    function appendEffectsHeader(value,string){
    	if (value!==undefined){
    		c=document.createElement('td');
			effectsTableHeader.appendChild(c);
			c.innerHTML=string;
        	effectsValueArray.push(value);
        	effectsTypeArray.push(string);
        }
    }

	appendEffectsHeader(currentEffects.hp,"HP");
	appendEffectsHeader(currentEffects.hpP,"HP (%)");
	appendEffectsHeader(currentEffects.rp,"RP");
	appendEffectsHeader(currentEffects.rpP,"RP (%)");
    
	appendEffectsHeader(currentEffects.hpmax,"HP max");
	appendEffectsHeader(currentEffects.hpmaxP,"HP max (%)");
	appendEffectsHeader(currentEffects.rpmax,"RP max");
	appendEffectsHeader(currentEffects.rpmaxP,"RP max (%)");
    
	appendEffectsHeader(currentEffects.str,"STR");
	appendEffectsHeader(currentEffects.strP,"STR (%)");
	appendEffectsHeader(currentEffects.vit,"VIT");
    appendEffectsHeader(currentEffects.vitP,"VIT (%)");
	appendEffectsHeader(currentEffects.int,"INT");
	appendEffectsHeader(currentEffects.intP,"INT (%)");
    
    appendEffectsHeader(currentEffects.fireresP,"Fire Res (%)");
    appendEffectsHeader(currentEffects.waterresP,"Water Res (%)");
    appendEffectsHeader(currentEffects.earthresP,"Earth Res (%)");
    appendEffectsHeader(currentEffects.windresP,"Wind Res (%)");
    appendEffectsHeader(currentEffects.lightresP,"Light Res (%)");
    appendEffectsHeader(currentEffects.darkresP,"Dark Res (%)");
    appendEffectsHeader(currentEffects.loveresP,"Love Res (%)");
    
    appendEffectsHeader(currentEffects.critP,"Crit (%)");
    
    appendEffectsHeader(currentEffects.critresP,"Crit Res (%)");
    appendEffectsHeader(currentEffects.knockresP,"Knock Res (%)");
    
    appendEffectsHeader(currentEffects.psnresP,"Psn Res (%)");
    appendEffectsHeader(currentEffects.sealresP,"Seal Res (%)");
    appendEffectsHeader(currentEffects.parresP,"Par Res (%)");
    appendEffectsHeader(currentEffects.slpresP,"Slp Res (%)");
    appendEffectsHeader(currentEffects.ftgresP,"Ftg Res (%)");
    appendEffectsHeader(currentEffects.sickresP,"Sick Res (%)");
    appendEffectsHeader(currentEffects.faintresP,"Faint Res (%)");
    
    appendEffectsHeader(currentEffects.psnatkP,"Psn Atk (%)")
    
    function appendRow(rowid,value){
    	td1 = document.createElement('td');
    	rowid.appendChild(td1);
    	td1.innerHTML = value;
    }
    
    for (row = 0; row < maxLv; row++) {
    	tr = document.createElement('tr');
        effectsTable.appendChild(tr)
    
    	td1 = document.createElement('td');
    	tr.appendChild(td1);
    	td1.innerHTML = row+1;
        
        var integerCorrector=1e6;
        var effectsMultiplier = statMultiplier[row]*integerCorrector
        
        for (j=0;j<effectsValueArray.length;j++){
        	var currentEffectsValueModified = effectsMultiplier*effectsValueArray[j]
            var currentEffectsValue= currentEffectsValueModified/integerCorrector;
        	var currentEffectsType = effectsTypeArray[j];
        	if (currentEffectsType.includes("%")){
            	var appendValue = Math.ceil(currentEffectsValue);
                if (stringIsInArray(effectsTypeMax200,currentEffectsType)){
                	appendValue = Math.min(200,appendValue)
                }
                if (stringIsInArray(effectsTypeMax100,currentEffectsType)){
                	appendValue = Math.min(100,appendValue)
                }
                if (stringIsInArray(effectsTypeMinNeg100,currentEffectsType)){
                	appendValue = Math.max(-100,appendValue)
                }
                } else {
                var appendValue = Math.floor(currentEffectsValue);
                }
            appendRow(tr,appendValue)
        }
        
        }
        
    }

if (dependentStats.hasChildNodes()){
	document.getElementById('currentItemDiv').appendChild(dependentStats);
    }

function getPriceMultiplierArray(multiplierType){
	switch(multiplierType){
    	case "E":
        	return priceMultiplierE;
        	break;
    	case "C1":
        	return priceMultiplierC1;
        	break;
    	case "C2":
        	return priceMultiplierC2;
        	break;
    	case "C3":
        	return priceMultiplierC3;
        	break;
    	case "Ch":
        	return priceMultiplierCh;
        	break;
    	case "X":
        	return priceMultiplierX;
        	break;
	}
}
    
var currentMultiplierArray=getPriceMultiplierArray(currentItem.pricemultiplier)

function getMultiplierAtLevel(multiplierArray,level){
	// Gets multiplier based on multiplier type and level
    var currentMultiplier=multiplierArray[level-1]
    return currentMultiplier
}

function getValueAtLevel(baseValue,level){
	// Gets stat value based on level and base stat
    var currentMultiplierValue=statMultiplier[level-1];
    var integerCorrector=1e6;
    var currentModifiedMultiplierValue=currentMultiplierValue*integerCorrector;
    var currentModifiedValue=currentModifiedMultiplierValue*baseValue;
    var currentValue=currentModifiedValue/integerCorrector;
    return currentValue;
}

function getSellPriceAtLevel(item,level){
	// Gets the price of an item at a specified level
	var sellPriceAtLv1=item.sell;
    var currentMultiplierArray = getPriceMultiplierArray(item.pricemultiplier);
    var currentMultiplier=getMultiplierAtLevel(currentMultiplierArray,level);
    var integerCorrector=1e6;
    // Not converting all factors into integers may result in undesirable floating numbers
    var currentModifiedMultiplier=integerCorrector*currentMultiplier;
    var sellPriceAtSpecifiedLvModified=sellPriceAtLv1*currentModifiedMultiplier;
    var sellPriceAtSpecifiedLv=Math.floor(sellPriceAtSpecifiedLvModified/integerCorrector);
    return sellPriceAtSpecifiedLv;
}
	

var multiplierTable = document.createElement('table'), tr, td, row, cell;

multiplierTableHeader=document.createElement('tr');

function appendMultiplierTable(string){
	var c = document.createElement('td');
    multiplierTableHeader.appendChild(c);
    c.innerHTML=string;
}

appendMultiplierTable("Lv.");
appendMultiplierTable("Effects");
appendMultiplierTable("Price (E)");
appendMultiplierTable("Price (C1)");
appendMultiplierTable("Price (C2)");
appendMultiplierTable("Price (C3)");
appendMultiplierTable("Price (Ch)");
appendMultiplierTable("Price (X)");
appendMultiplierTable("Lv.");

multiplierTable.appendChild(multiplierTableHeader);

for (row = 0; row < maxLv; row++) {
    var tr = document.createElement('tr');
    var rowOfValue = [];
    
    td1 = document.createElement('td');
    tr.appendChild(td1);
    td1.innerHTML = row+1;
    
    rowOfValue.push("×"+statMultiplier[row].toPrecision(4));
    rowOfValue.push("×"+priceMultiplierE[row].toPrecision(2));
    rowOfValue.push("×"+priceMultiplierC1[row].toPrecision(3));
    rowOfValue.push("×"+priceMultiplierC2[row].toPrecision(3));
    rowOfValue.push("×"+priceMultiplierC3[row].toPrecision(3));
    rowOfValue.push("×"+priceMultiplierCh[row].toPrecision(3));
    rowOfValue.push("×"+priceMultiplierX[row].toPrecision(2));
    
    function appendMultiplierValueByRow(value){
    	td = document.createElement('td');
		tr.appendChild(td);
        td.innerHTML=value;
        td.align="center";
    }
    
    for (i=0;i<rowOfValue.length;i++){
    	appendMultiplierValueByRow(rowOfValue[i])
    }
    
    tdf = document.createElement('td');
    tr.appendChild(tdf);
    tdf.innerHTML = row+1;
    
    multiplierTable.appendChild(tr);
}
    
var explanation = document.createElement('p');
var examples = document.createElement('p');

explanation.innerHTML="An item's sell price at a specified level can be predicted with its price multiplier. "
explanation.innerHTML+="The item's base sell price is its sell price at Lv. 1. "
explanation.innerHTML+="This info can be obtained from the item's info screen in shipping records, "
explanation.innerHTML+="shop lists, recipe lists, material lists in recipes, etc. "
explanation.innerHTML+="The item's price multiplier is not shown and must be determined by experimentation.<br><br>";
explanation.innerHTML+="For example, Pickled Turnip has a base sell price of 48 G (from the info screen) "
explanation.innerHTML+="and price multiplier C1 (as determined experimentally). "
explanation.innerHTML+="At Lv. 6, the price multiplier value for C1 is ×1.40. "
explanation.innerHTML+="Multiply the sell price by this multiplier:<br>48 G × 1.40 = 67.2 G<br>";
explanation.innerHTML+="Round this result down. Thus, Lv. 6 Pickled Turnip sells for 67 G.";

examples.innerHTML+="Raw materials and equipment have price multiplier E.<br>";
examples.innerHTML+="Most cooked dishes have price multiplier C1.<br>";
examples.innerHTML+="Some cooked dishes have price multiplier C2.<br>";
examples.innerHTML+="A few cooked dishes have price multiplier C3.<br>";
examples.innerHTML+="Most items produceable at the Chemistry Set have price multiplier Ch.<br>";
examples.innerHTML+="A few items have price multiplier X i.e.";
examples.innerHTML+=" their sell prices do not change with respect to their level."

function showMultiplierTable(){
	var node = document.getElementById('multiplierTable');
	node.innerHTML="Hide Multiplier Table";
	document.getElementById('multiplierTableDiv').appendChild(multiplierTable);
    
    document.getElementById('multiplierTableDiv').appendChild(explanation)
    
    document.getElementById('multiplierTableDiv').appendChild(examples)
	node.setAttribute('onclick','hideMultiplierTable()');
    }

function hideMultiplierTable(){
	var node = document.getElementById('multiplierTable');
	node.innerHTML="Show Multiplier Table";
	node.setAttribute('onclick','showMultiplierTable()');
	document.getElementById('multiplierTableDiv').removeChild(multiplierTable);
    document.getElementById('multiplierTableDiv').removeChild(explanation)
    document.getElementById('multiplierTableDiv').removeChild(examples)
    }

function canBuyAtVaryingLevels(item){
	var foo=false
    
    switch(item.category){
		case ("Vegetable"):
			foo=true;
    		break;
    	case ("Seed"):
			foo=true;
    		break;
    	case ("Plant"):
			foo=true;
    		break;
	}
    
    switch(item.name){
    
		case ("Pineapple"): // Most fruits do not vary level by purchase
			foo=true; // Pineapple can be bought at different levels
    		break;
    	case ("Strawberry"): // Fruit
			foo=true; // Strawberry can be bought at different levels
    		break;
            
    	case ("Antidote Grass"): // Plant
			foo=false; // cannot be bought at levels above 1
    		break;
    	case ("Bamboo Sprout"): // Vegetable
			foo=false; // cannot be bought at levels above 1
    		break;
    	case ("Elli Leaves"): // Plant
			foo=false; // cannot be bought at levels above 1
    		break;
    	case ("Medicinal Herb"): // Plant
			foo=false; // cannot be bought at levels above 1
    		break;
    	case ("Weeds"): // Plant
			foo=false; // cannot be bought at levels above 1
    		break;
    	case ("Withered Grass"): // Plant
			foo=false; // cannot be bought at levels above 1
    		break;
            
    	case ("Black Grass"): // Plant
			foo=false; // cannot be bought at levels above 1
    		break;
    	case ("White Grass"): // Plant
			foo=false; // cannot be bought at levels above 1
    		break;
    	case ("Red Grass"): // Plant
			foo=false; // cannot be bought at levels above 1
    		break;
    	case ("Orange Grass"): // Plant
			foo=false; // cannot be bought at levels above 1
    		break;            
    	case ("Yellow Grass"): // Plant
			foo=false; // cannot be bought at levels above 1
    		break;
    	case ("Green Grass"): // Plant
			foo=false; // cannot be bought at levels above 1
    		break;
    	case ("Blue Grass"): // Plant
			foo=false; // cannot be bought at levels above 1
    		break;
    	case ("Indigo Grass"): // Plant
			foo=false; // cannot be bought at levels above 1
    		break;
    	case ("Purple Grass"): // Plant
			foo=false; // cannot be bought at levels above 1
    		break;
	}
        
    if (item.buy==undefined){
    	foo=false;
        }
    
    return foo;
    }

function canProduceAtVaryingLevels(item){
	var foo=false;
    
    if (item.cookinglevel!==undefined){
    	//Cooked dishes can be produced at levels above 1
    	foo=true; 
    	}
    if (item.chemistrylevel!==undefined){
    	// Chemistry products can be produced at levels above 1
    	foo=true;
        }
        
    return foo
    }

var profitTable = document.createElement('table'), tr, td, row, cell;
var profitTableHeader=document.createElement('tr');
profitTable.appendChild(profitTableHeader);

function appendToProfitHeader(string){
	var c = document.createElement('td');
	profitTableHeader.appendChild(c);
	c.innerHTML=string;
}

appendToProfitHeader("Lv.");
appendToProfitHeader("Multiplier<br>("+currentItem.pricemultiplier+")");
var c3header="Sell Price<br>of "
if (currentItem.materials!==undefined){
	c3header+="Product";
    } else {
    c3header+="Item";
    }
appendToProfitHeader(c3header)
appendToProfitHeader("Increment from<br>previous level")

var profitArray=[];
var previousPrice;

var levelColumn=[];
var multiplierColumn=[];
var sellPriceColumn=[];
var incrementColumn=[];
var profitColumn=[];
var discountedProfitColumn=[];
var opportunityCostColumn=[];
var opportunityProfitColumn=[];
var returnOnInvestmentColumn=[];

for (i=0;i<maxLv;i++){
	levelColumn.push(i+1);
    var currentMultiplier=currentMultiplierArray[i]
	multiplierColumn.push(currentMultiplier.toPrecision(3));
    sellPriceColumn.push(getSellPriceAtLevel(currentItem,i+1))
    if (i==0){
    	incrementColumn.push("N/A")
    } else {
    	incrementColumn.push(getSellPriceAtLevel(currentItem,i+1)-previousPrice)
    }
    previousPrice=getSellPriceAtLevel(currentItem,i+1)
}

Array.prototype.arrayPush = function(elementArray){
    for (i=0;i<elementArray.length;i++){
    	this.push(elementArray[i]);
        };
};

if (canProduceAtVaryingLevels(currentItem)||canBuyAtVaryingLevels(currentItem)){

	document.getElementById('profitTable').innerHTML="<b>Profitability by Level</b>"

	if (currentItem.materials!==undefined){
    	if (allMaterialsBuyable(currentItem.materials)){
    		appendToProfitHeader("Profit<br>(w/o D)");
			appendToProfitHeader("Profit<br>(w/ D)");
            }

		column6 = document.createElement('td');
		profitTableHeader.appendChild(column6);
		column6.innerHTML="Opportunity<br>Cost";
    	column6.align="center";
    
		if (allMaterialsBuyable(currentItem.materials)){
        	column7 = document.createElement('td');
			profitTableHeader.appendChild(column7);
			column7.innerHTML="Opportunity<br>Profit";
    		column7.align="center";
		}
    } else if (currentItem.buy!==undefined){
    		appendToProfitHeader("Profit<br>(w/o D)");
			appendToProfitHeader("Profit<br>(w/ D)");
    }

	for (row = 0; row < maxLv; row++) {
    
	var sellPrice=getSellPriceAtLevel(currentItem,row+1);
	var sellPriceOfMaterials=sellPrice;

		if (currentItem.materials!==undefined){
        	var buyPrice=currentMaterialsBuyPrice;
        	var buyPriceDiscount=currentMaterialsBuyPriceDiscount
            var sellPriceOfMaterials=0;
            
            for (j=0;j<currentItem.materials.length;j++){
            	var currentMaterial=currentItem.materials[j];
                sellPriceOfMaterials+=getSellPriceAtLevel(currentMaterial,row+1)
            	}
                
    		if (allMaterialsBuyable(currentItem.materials)){
        		profitColumn.push(sellPrice-buyPrice);
    			profitWDiscount = sellPrice-buyPriceDiscount;
    			discountedProfitColumn.push(profitWDiscount);
                opportunityCostColumn.push(sellPriceOfMaterials);
                opportunityProfitColumn.push(sellPriceOfMaterials-buyPrice);
			}
                
		} else {
        	var buyPrice=currentItem.buy
        	var buyPriceDiscount=Math.ceil(.9*currentItem.buy)
        	
            if(currentItem.buy!==undefined){
            
            	profitColumn.push(sellPrice-buyPrice);
                profitWDiscount = sellPrice-buyPriceDiscount;
                discountedProfitColumn.push(profitWDiscount)
			}
		}
	}
    
	var footer=document.createElement('p')
	footer.innerHTML="Red denotes <span style='color:#FF0000'>not profitable</span> at the specified level.<br>"
	footer.innerHTML+="Blue denotes profit only if the "
    footer.innerHTML+="<span style='color:#0000FF'>materials are discounted</span>.<br>"
	footer.innerHTML+="Green denotes <span style='color:#00FF00'>profit</span> at the specified level.<br>"
    footer.innerHTML+="Violet denotes higher profit from "
    footer.innerHTML+="<span style='color:#FF00FF'>selling the materials directly</span> than the product.<br>"
    footer.innerHTML+="Underlined denotes higher profit from "
    footer.innerHTML+="<span style='text-decoration:underline'>buying and selling the materials</span>"
    footer.innerHTML+=" directly than buying and converting the materials to this product."
    
    footer.innerHTML+="<br><br>Opportunity cost: total sell price of materials."
    footer.innerHTML+="<br>Opportunity profit: total sell price of materials minus total buy price of materials."
    
    } else {
	//document.getElementById('profitTable').innerHTML="<b>Profit table is not applicable.</b>"
    document.getElementById('profitTable').innerHTML="<b>Price by Level</b>"
    }
        
profitArray.arrayPush(levelColumn);
profitArray.arrayPush(multiplierColumn);
profitArray.arrayPush(sellPriceColumn);
profitArray.arrayPush(incrementColumn);
profitArray.arrayPush(profitColumn);
profitArray.arrayPush(discountedProfitColumn);
profitArray.arrayPush(opportunityCostColumn);
profitArray.arrayPush(opportunityProfitColumn);
profitArray.arrayPush(returnOnInvestmentColumn);

for (row=0;row<maxLv;row++){
    tr = document.createElement('tr');
    
    for (col=0;col<profitArray.length/maxLv;col++){
    	td = document.createElement('td');
    	tr.appendChild(td);
        var currentValue = profitArray[row+maxLv*col];
    	td.innerHTML = currentValue;
        if ([3,6,7].indexOf(col) > -1){
        	td.align="center";
        }
        
        if (col==4){
        	if (0>currentValue){
        		td.style.color="red"
            } else if (currentValue>0){
            	td.style.color="green";
                td.style.fontWeight="bold";
                td.style.fontSize=18;
            }
        }
        
        if (col==5){
        	if (0>currentValue){
        		td.style.color="red";
            } else if (currentValue>0){
            	td.style.color="blue";
                td.style.fontWeight="bold";
                if (profitArray[row+maxLv*(col-1)]>0){
                	td.style.color="green";
                	td.style.fontSize=18;
                }
            }
        }
        
        if (col==6){
        	if (currentValue>profitArray[row+maxLv*(col-4)]){
            	td.style.color="violet";
        		td.style.fontWeight="bold";
				td.style.fontSize=18;
            }
        }
        
        if (col==7){
        	if (currentValue>profitArray[row+maxLv*(col-2)]){
            	td.style.textDecoration="underline";
				td.style.fontSize=18;
            }
        }
	}
    
    profitTable.appendChild(tr);
}
    
document.getElementById('profitTable').appendChild(profitTable);
if (footer!==undefined){
	document.getElementById('profitTable').appendChild(footer);
}
</script>
